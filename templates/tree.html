<!doctype html>
<html lang="en">
    <head>
        <title>SkillTree</title>
        {{ template "header" }}
        <!-- custom css -->
        <link rel="stylesheet" href="/static/main.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    </head>
    <body>
        <div class="container">
            <div class="columns">
                {{ template "sidebar" .Page }}
                <main class="column col-10 col-gapless container tree">
                    <header class="navbar tree-nav">
                        <section class="navbar-section">
                            <p>
                                {{ .TreeData.Name }}
                                {{ .TreeData.Cname }}
                            </p>
                        </section>
                        <section class="navbar-section">
                            <a href="/tree/delete/{{ .TreeData.Treeid }}/" class="btn btn-link delete_btn" onclick="return confirm_delete();">Delete</a>
                        </section>
                    </header>

                    {{ .TreeData.Svg }}
                    {{ .TreeData.State }}

                </main>
            </div>
        </div>
        {{ template "footer" }}
    </body>
</html>

<script>

    $(document).ready(function(){
        setup_tree({{ .TreeData.State }});
    });

    function setup_tree(skill_tree_json){
        var skill_tree = $.parseJSON(skill_tree_json);
        // set_node(skill_tree);
        // set_precourse(skill_tree);
        alert(skill_tree["key"]);
    }
    function set_node(skill_tree){

    }
    function set_precourse(skill_tree){

    }

    function confirm_delete(){
        var cancel = confirm("Are you sure to delete yout skill tree?");
        return cancel;
    }
</script>
